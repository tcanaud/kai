agreement_version: "1.0"

# ── Identity ──────────────────────────────────────────
feature_id: "conv-005-claude-commands"
title: "Convention: Claude Code Slash Command Integration"
status: "active"
created: "2026-02-18"
updated: "2026-02-18"
synced: "2026-02-18"
owner: "Thibaud Canaud"

# ── Product Intent ────────────────────────────────────
intent: |
  Packages that provide user-facing workflows install AI-friendly prompt
  templates into .claude/commands/ during their init step. These Markdown
  files serve as Claude Code slash commands (e.g., /adr.create,
  /agreement.check, /product.intake) that encode structured workflows for
  AI-assisted development. BMAD-internal modules (like mermaid-workbench)
  that operate exclusively through the BMAD agent system are exempt — they
  install BMAD tasks instead of Claude commands. The slash commands are the
  primary user interface for the toolchain.

user_outcomes:
  - "Developers interact with the toolchain through natural-language slash commands in Claude Code"
  - "Each package extends the Claude Code command palette with domain-specific workflows"

acceptance_criteria:
  - criterion: "Each package's installer module copies Markdown templates into .claude/commands/ (BMAD-internal modules that provide no user-facing slash commands are exempt)"
    verifiable: true
  - criterion: "Command files follow <domain>.<action>.md naming (e.g., adr.create.md, feature.list.md). A package MAY additionally provide a shorthand alias (e.g., k.md) for frequently-used commands."
    verifiable: true
  - criterion: "The update command refreshes command files without touching user artifacts"
    verifiable: true

# ── Interfaces ────────────────────────────────────────
interfaces:
  - type: "cli"
    path: ".claude/commands/*.md"
    contract: "Markdown prompt templates invokable as Claude Code slash commands"

# ── Non-Functional Constraints ────────────────────────
constraints: []

# ── Breaking Change Policy ────────────────────────────
breaking_changes:
  policy: "agreement-first"
  history: []

# ── Traceability ──────────────────────────────────────
references:
  bmad: []
  speckit: []
  code:
    - "packages/adr-system/templates/commands/"
    - "packages/agreement-system/templates/commands/"
    - "packages/feature-lifecycle/templates/commands/"
    - "packages/knowledge-system/templates/commands/"
    - "packages/mermaid-workbench/templates/bmad/modules/mermaid-workbench/tasks/"
    - "packages/product-manager/templates/commands/"
    - "packages/tcsetup/commands/"
  adr:
    - ".adr/global/20260218-claude-code-as-primary-ai-interface.md"

# ── Drift Detection ──────────────────────────────────
watched_paths:
  bmad: []
  speckit: []
  code:
    - "packages/*/templates/commands/*.md"
    - ".claude/commands/*.md"

checksums: {}

# ── Feature Coverage ─────────────────────────────────
applies_to_features:
  - "001-adr-system"
  - "002-agreement-system"
  - "003-feature-lifecycle"
  - "004-mermaid-workbench"
  - "005-tcsetup"
  - "006-tcsetup-update"
  - "007-knowledge-system"
  - "008-product-manager"
