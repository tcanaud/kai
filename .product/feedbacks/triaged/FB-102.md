---
id: "FB-102"
title: "Create @tcanaud/kai-product CLI to replace LLM tool-call plumbing with atomic commands"
status: "triaged"
category: "new-feature"
priority: null
source: "user"
reporter: "Thibaud Canaud"
created: "2026-02-20"
updated: "2026-02-20"
tags: []
exclusion_reason: ""
linked_to:
  backlog:
    - "BL-007"
  features:
    - "018-cli-atomique-kai-product-pour-operations-produit"
  feedbacks: []
resolution:
  resolved_date: ""
  resolved_by_feature: ""
  resolved_by_backlog: ""
---

En tant qu'utilisateur du système kai product, les opérations simples (move backlog to done, triage, promote) nécessitent un nombre excessif d'appels outils LLM : lecture YAML, édition frontmatter, mv fichier, mise à jour index.yaml, mise à jour feedbacks liés, etc. Chaque action unitaire coûte 5-10 tool calls. Le bulk est impossible — pour traiter 14 backlogs il faut 70+ calls. En plus, index.yaml est maintenu manuellement alors qu'il pourrait être regénéré automatiquement par scan des fichiers.

Proposition : créer un package npx @tcanaud/kai-product (ou intégrer dans @tcanaud/playbook) avec des commandes CLI atomiques qui encapsulent toute la logique fichier :

- `npx kai-product move BL-023 done` — déplace le fichier, met à jour le status frontmatter, regénère index.yaml
- `npx kai-product move BL-023,BL-024,BL-028 done` — bulk move
- `npx kai-product promote BL-055` — crée le feature YAML, déplace le backlog, met à jour les feedbacks liés, regénère index
- `npx kai-product triage` — scan feedbacks/new/, clustering, création backlogs, regénère index
- `npx kai-product reindex` — regénère index.yaml à partir du scan des fichiers (plus besoin de le maintenir à la main)
- `npx kai-product check` — vérifie l'intégrité (status desync, orphelins, broken chains)

Avantages :
1. Une action = 1 tool call Bash au lieu de 5-10 Read/Edit/Bash
2. Support bulk natif (listes CSV d'IDs)
3. index.yaml auto-généré, plus jamais maintenu à la main
4. Logique métier en Node.js testable, pas dans les prompts
5. Réduit drastiquement le coût token et la latence des opérations PM

Sévérité : haute — chaque cycle autopilot gaspille des centaines de tool calls sur de la plomberie fichier que du code pourrait faire en 1 appel.
