---
id: "BL-006"
title: "Fix tcsetup merge logic for customize.yaml files"
status: "promoted"
category: "bug"
priority: "high"
created: "2026-02-19"
updated: "2026-02-19"
owner: "Thibaud Canaud"
feedbacks:
  - "FB-006"
features:
  - "016-fix-tcsetup-update"
tags: []
promotion:
  promoted_date: "2026-02-19"
  feature_id: "016-fix-tcsetup-update"
cancellation:
  cancelled_date: ""
  reason: ""
---

## Problem

The `npx tcsetup update` command incorrectly appends data to customize.yaml files without applying any merge logic. When executed, it blindly concatenates content to:
- `_bmad/_config/agents/core-bmad-master.customize.yaml`
- `_bmad/_config/agents/bmm-pm.customize.yaml`

This causes data duplication and inconsistencies instead of intelligently merging configuration changes.

## Solution Required

Implement proper merge logic in the tcsetup tool (located in `@packages/tcsetup/`) that:
1. Parses existing YAML content
2. Detects conflicting keys
3. Merges new data intelligently instead of appending
4. Preserves user customizations

This ensures configuration updates are applied correctly without duplicating or overwriting existing data.
