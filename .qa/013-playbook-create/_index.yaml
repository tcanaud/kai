qa_version: "1.0"

feature_id: "013-playbook-create"
generated: "2026-02-19T17:00:00Z"
generator: "qa.plan"

checksums:
  spec_md:
    path: "specs/013-playbook-create/spec.md"
    sha256: "05b6436c6236e0291e35cc47925aa06f7526f76e222cec3413b2a8b27789b46e"
  agreement_yaml:
    path: ".agreements/013-playbook-create/agreement.yaml"
    sha256: "d98361069385f8a1cb686a025c8f75a08f4ef0450cc8469ffb9ba9f95a8bc2d7"

scripts:
  - filename: "test-valid-playbook-from-intention.sh"
    criterion_ref: "US1.AC1"
    criterion_text: "Given a project with kai installed and multiple slash commands available, When the developer runs /playbook.create with 'validate and deploy a hotfix for critical bugs', Then the system produces a valid playbook YAML file in .playbooks/playbooks/ with steps referencing only commands that exist in the project."
    type: "acceptance"

  - filename: "test-step-autonomy-and-policies.sh"
    criterion_ref: "US1.AC2"
    criterion_text: "Given the developer provides an intention, When the system generates the playbook, Then each step has an appropriate autonomy level, meaningful pre/postconditions from the allowed vocabulary, and a sensible error policy."
    type: "acceptance"

  - filename: "test-validator-zero-violations.sh"
    criterion_ref: "US1.AC3"
    criterion_text: "Given a generated playbook file, When running the playbook validator, Then the playbook passes validation with zero violations."
    type: "acceptance"

  - filename: "test-vague-intention-clarification.sh"
    criterion_ref: "US1.AC4"
    criterion_text: "Given the developer provides a vague intention like 'I want to ship features faster', When the system processes the intention, Then it asks clarifying questions to narrow the workflow scope before generating the playbook."
    type: "acceptance"

  - filename: "test-omits-qa-when-not-installed.sh"
    criterion_ref: "US2.AC1"
    criterion_text: "Given a project where the QA system is not installed (no .qa/ directory), When the system generates a playbook that could include QA steps, Then it omits QA-related steps and does not reference QA conditions."
    type: "acceptance"

  - filename: "test-follows-existing-patterns.sh"
    criterion_ref: "US2.AC2"
    criterion_text: "Given a project where existing playbooks always use gate_always for PR creation, When the system generates a new playbook that includes a PR step, Then it follows the same pattern and sets the PR step to gate_always."
    type: "acceptance"

  - filename: "test-naming-conventions.sh"
    criterion_ref: "US2.AC3"
    criterion_text: "Given a project with documented conventions in .knowledge/, When the system generates a playbook, Then the playbook name follows the project's naming conventions (lowercase slug, consistent with existing playbook names)."
    type: "acceptance"

  - filename: "test-identifies-all-commands.sh"
    criterion_ref: "US2.AC4"
    criterion_text: "Given a project with multiple installed kai tools, When the system analyzes the project, Then it identifies all available slash commands and uses only valid commands in the generated playbook."
    type: "acceptance"

  - filename: "test-modify-autonomy-revalidate.sh"
    criterion_ref: "US3.AC1"
    criterion_text: "Given a generated playbook is presented to the developer, When the developer requests changing a step's autonomy level, Then the system updates that step and re-validates the entire playbook."
    type: "acceptance"

  - filename: "test-add-step-command.sh"
    criterion_ref: "US3.AC2"
    criterion_text: "Given a generated playbook, When the developer requests adding a new step referencing a specific slash command, Then the system adds the step in the correct position with appropriate conditions and policies."
    type: "acceptance"

  - filename: "test-remove-step-dependency-warning.sh"
    criterion_ref: "US3.AC3"
    criterion_text: "Given a generated playbook, When the developer requests removing a step, Then the system removes it and adjusts any dependent conditions."
    type: "acceptance"

  - filename: "test-index-updated-after-creation.sh"
    criterion_ref: "US3.AC4"
    criterion_text: "Given the developer approves the final playbook, When the system writes it to disk, Then the playbook index (.playbooks/_index.yaml) is updated to include the new playbook entry."
    type: "acceptance"

  - filename: "test-feature-arg-interpolation.sh"
    criterion_ref: "US4.AC1"
    criterion_text: "Given the developer requests a playbook for a workflow that involves feature-specific artifacts, When the system generates the playbook, Then all feature-specific references use {{feature}} argument interpolation, never hardcoded values."
    type: "acceptance"

  - filename: "test-no-hardcoded-feature-ids.sh"
    criterion_ref: "US4.AC2"
    criterion_text: "Given a generated playbook, When inspecting its content, Then no step references a specific feature ID, branch name, file path with a feature number, or any other feature-specific value."
    type: "acceptance"

  - filename: "test-feature-arg-resolves.sh"
    criterion_ref: "US4.AC3"
    criterion_text: "Given a generated playbook with a feature arg declared as required, When the playbook is run with different feature names on separate occasions, Then all argument references resolve correctly to the provided feature name each time."
    type: "acceptance"

  - filename: "test-name-slug-from-intention.sh"
    criterion_ref: "US5.AC1"
    criterion_text: "Given a free-text intention, When the system generates a playbook, Then the name is a meaningful lowercase slug that captures the intention essence."
    type: "acceptance"

  - filename: "test-conflict-detection.sh"
    criterion_ref: "US5.AC2"
    criterion_text: "Given a playbook with the same derived name already exists, When the developer attempts to create a playbook with the same name, Then the system warns about the conflict and offers: overwrite, rename, or cancel."
    type: "acceptance"

  - filename: "test-rename-validates-slug.sh"
    criterion_ref: "US5.AC3"
    criterion_text: "Given the developer chooses 'rename' when a conflict is detected, When the system prompts for a new name, Then the developer can provide a custom name that is validated against the slug pattern."
    type: "acceptance"

  - filename: "test-cli-slash-command-interface.sh"
    criterion_ref: "IF1"
    criterion_text: "Claude Code slash command â€” accepts free-text intention, outputs validated playbook YAML"
    type: "interface"

total_scripts: 19
by_type:
  acceptance: 18
  interface: 1
  edge_case: 0
